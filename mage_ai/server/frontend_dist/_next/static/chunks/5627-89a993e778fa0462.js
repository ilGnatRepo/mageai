"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5627],{52749:function(e,n,r){var t=r(82394),i=r(82684),l=r(71180),o=r(55485),c=r(68562),s=r(7267),u=r(38276),a=r(30160),d=r(35576),f=r(17488),p=r(72473),h=r(4015),j=r(70515),g=r(81728),v=r(28598);function m(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function x(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?m(Object(r),!0).forEach((function(n){(0,t.Z)(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}n.Z=function(e){var n,r,t,m,b=e.createPipeline,P=e.isLoading,Z=e.onClose,w=(0,i.useRef)(null),O=(0,i.useState)(!1),C=O[0],y=O[1],I=(0,i.useState)({name:(0,g.Y6)()}),k=I[0],A=I[1];return(0,i.useEffect)((function(){var e;null==w||null===(e=w.current)||void 0===e||e.focus()}),[]),(0,v.jsxs)(h.Nk,{children:[(0,v.jsx)(h.I5,{children:(0,v.jsx)(o.ZP,{alignItems:"center",justifyContent:"center",children:(0,v.jsx)(p.AISparkle,{size:5*j.iI,warning:!0})})}),(0,v.jsx)(h.gI,{children:(0,v.jsxs)(u.Z,{py:1,children:[(0,v.jsx)(u.Z,{mb:1,children:(0,v.jsx)(a.ZP,{default:!0,children:"新建管道"})}),(0,v.jsx)(a.ZP,{textOverflow:!0,children:"使用 AI"})]})}),(0,v.jsxs)(h.gI,{children:[(0,v.jsx)(a.ZP,{default:!0,children:"名称"}),(0,v.jsx)(f.Z,{alignRight:!0,noBackground:!0,noBorder:!0,onChange:function(e){return A((function(n){return x(x({},n),{},{name:e.target.value})}))},paddingVertical:j.iI,placeholder:"输入管道名称...",value:(null==k?void 0:k.name)||""})]}),(0,v.jsx)(h.gI,{children:(0,v.jsxs)(o.ZP,{flexDirection:"column",fullWidth:!0,children:[(0,v.jsx)(u.Z,{mb:2,pt:1,children:(0,v.jsx)(a.ZP,{default:!0,children:"描述管道应执行的操作"})}),(0,v.jsxs)(u.Z,{pb:1,pr:j.cd,children:[(0,v.jsx)(d.Z,{fullWidth:!0,onChange:function(e){return A((function(n){return x(x({},n),{},{llm:{request:{pipeline_description:e.target.value},use_case:s.z.GENERATE_PIPELINE_WITH_DESCRIPTION}})}))},placeholder:"输入管道用途...",ref:w,rows:8,value:(null==k||null===(n=k.llm)||void 0===n||null===(r=n.request)||void 0===r?void 0:r.pipeline_description)||""}),(P||C)&&(0,v.jsx)(u.Z,{mt:1,children:(0,v.jsx)(a.ZP,{warning:!0,children:"正在根据您的描述使用 AI 生成管道..."})})]})]})}),(0,v.jsx)(h.$b,{children:(0,v.jsxs)(o.ZP,{fullWidth:!0,children:[(0,v.jsx)(c.ZP,{bold:!0,centerText:!0,disabled:!(null!=k&&k.name&&null!=k&&null!==(t=k.llm)&&void 0!==t&&null!==(m=t.request)&&void 0!==m&&m.pipeline_description),loading:P||C,onClick:function(){y(!0),b({pipeline:k}).then((function(){return y(!1)}))},primary:!0,tabIndex:0,uuid:"AIControlPanel/CreatePipeline",children:"创建管道"}),Z&&(0,v.jsx)(u.Z,{ml:1,children:(0,v.jsx)(l.ZP,{onClick:Z,tabIndex:0,children:"取消"})})]})})]})}},94629:function(e,n,r){r.d(n,{Z:function(){return w}});var t=r(82394),i=r(21831),l=r(82684),o=r(50724),c=r(82555),s=r(97618),u=r(70613),a=r(92272),d=r(68899),f=r(28598);function p(e,n){var r=e.children,t=e.noPadding;return(0,f.jsx)(d.HS,{noPadding:t,ref:n,children:r})}var h=l.forwardRef(p),j=r(62547),g=r(82571),v=r(77417),m=r(46684),x=r(75375);function b(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function P(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?b(Object(r),!0).forEach((function(n){(0,t.Z)(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}function Z(e,n){e.addProjectBreadcrumbToCustomBreadcrumbs;var r=e.after,t=e.afterHeader,l=e.afterHidden,p=e.afterWidth,b=e.afterWidthOverride,Z=e.appendBreadcrumbs,w=e.before,O=e.beforeHeader,C=e.beforeWidth,y=e.breadcrumbs,I=e.children,k=e.contained,A=e.errors,M=e.headerMenuItems,W=e.headerOffset,E=e.hideAfterCompletely,B=e.mainContainerHeader,S=e.navigationItems,T=e.setAfterHidden,N=e.setAfterWidth,D=e.setBeforeWidth,H=e.setErrors,R=e.subheaderChildren,_=e.subheaderNoPadding,z=e.title,L=e.uuid,q=(0,x.Z)(L,{beforeResizeOffset:x.H,setWidthAfter:N,setWidthBefore:D,widthAfter:p,widthBefore:C,widthOverrideAfter:b}),Y=q.mainContainerRef,F=q.mousedownActiveAfter,G=q.mousedownActiveBefore,U=q.setMousedownActiveAfter,V=q.setMousedownActiveBefore,$=q.setWidthAfter,K=q.setWidthBefore,Q=q.widthAfter,J=q.widthBefore,X=(0,v.Z)().project,ee=[];return y&&ee.push.apply(ee,(0,i.Z)(y)),null!=y&&y.length&&!Z||!X||null!=y&&y.length||ee.unshift({bold:!Z,label:function(){return z}}),(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(u.Z,{title:z}),(0,f.jsx)(a.Z,{breadcrumbs:ee,menuItems:M}),(0,f.jsxs)(d.Nk,{ref:n,children:[0!==(null==S?void 0:S.length)&&(0,f.jsx)(d.lm,{showMore:!0,children:(0,f.jsx)(g.Z,{navigationItems:S,showMore:!0})}),(0,f.jsx)(s.Z,{flex:1,flexDirection:"column",children:(0,f.jsxs)(j.Z,{after:r,afterHeader:t,afterHeightOffset:m.Mz,afterHidden:l,afterMousedownActive:F,afterWidth:Q,before:w,beforeHeader:O,beforeHeightOffset:m.Mz,beforeMousedownActive:G,beforeWidth:w?J:d.k1,contained:k,headerOffset:W,hideAfterCompletely:!r||E,leftOffset:w?d.k1:null,mainContainerHeader:B,mainContainerRef:Y,setAfterHidden:T,setAfterMousedownActive:U,setAfterWidth:$,setBeforeMousedownActive:V,setBeforeWidth:K,children:[R&&(0,f.jsx)(h,{noPadding:_,children:R}),I]})})]}),A&&(0,f.jsx)(o.Z,{disableClickOutside:!0,isOpen:!0,onClickOutside:function(){return null==H?void 0:H(null)},children:(0,f.jsx)(c.Z,P(P({},A),{},{onClose:function(){return null==H?void 0:H(null)}}))})]})}var w=l.forwardRef(Z)},65458:function(e,n,r){r.d(n,{d:function(){return u}});var t=r(72473),i=r(57653),l=r(70515),o=r(81728),c=r(28598),s=1.5*l.iI,u=function(e,n){var r=[{beforeIcon:(0,c.jsx)(t.BatchPipeline,{}),label:function(){return"Standard (batch)"},onClick:function(){var r;null!=n&&n.showCreatePipelineModal?null==n||null===(r=n.showCreatePipelineModal)||void 0===r||r.call(n,{pipelineType:i.qL.PYTHON}):e({pipeline:{name:(0,o.Y6)()}})},uuid:"Pipelines/NewPipelineMenu/standard"},{beforeIcon:(0,c.jsx)(t.IntegrationPipeline,{}),label:function(){return"Data integration"},onClick:function(){var r;null!=n&&n.showCreatePipelineModal?null==n||null===(r=n.showCreatePipelineModal)||void 0===r||r.call(n,{pipelineType:i.qL.INTEGRATION}):e({pipeline:{name:(0,o.Y6)(),type:i.qL.INTEGRATION}})},uuid:"Pipelines/NewPipelineMenu/integration"},{beforeIcon:(0,c.jsx)(t.StreamingPipeline,{size:s}),label:function(){return"Streaming"},onClick:function(){var r;null!=n&&n.showCreatePipelineModal?null==n||null===(r=n.showCreatePipelineModal)||void 0===r||r.call(n,{pipelineType:i.qL.STREAMING}):e({pipeline:{name:(0,o.Y6)(),type:i.qL.STREAMING}})},uuid:"Pipelines/NewPipelineMenu/streaming"}];return null!=n&&n.showBrowseTemplates&&r.push({beforeIcon:(0,c.jsx)(t.TemplateShapes,{}),label:function(){return"From a template"},onClick:function(){var e;return null==n||null===(e=n.showBrowseTemplates)||void 0===e?void 0:e.call(n)},uuid:"Pipelines/NewPipelineMenu/custom_template"}),null!=n&&n.showImportPipelineModal&&r.push({beforeIcon:(0,c.jsx)(t.Upload,{}),label:function(){return"Import pipeline zip"},onClick:function(){var e;return null==n||null===(e=n.showImportPipelineModal)||void 0===e?void 0:e.call(n)},uuid:"Pipelines/NewPipelineMenu/upload"}),null!=n&&n.showAIModal&&r.push({beforeIcon:(0,c.jsx)(t.AISparkle,{}),label:function(){return"Using AI (beta)"},onClick:function(){var e;return null==n||null===(e=n.showAIModal)||void 0===e?void 0:e.call(n)},uuid:"Pipelines/NewPipelineMenu/AI_modal"}),r}},76111:function(e,n,r){var t=r(82394),i=r(82684),l=r(71180),o=r(97618),c=r(55485),s=r(68562),u=r(38276),a=r(30160),d=r(35576),f=r(17488),p=r(44897),h=r(4015),j=r(39643),g=r(57653),v=r(70515),m=r(81728),x=r(28598);function b(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function P(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?b(Object(r),!0).forEach((function(n){(0,t.Z)(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}n.Z=function(e){var n=e.onClose,r=e.onSave,t=e.pipelineType,b=g.Mj[t],Z=(0,i.useRef)(null),w=(0,i.useState)({name:(0,m.Y6)()}),O=w[0],C=w[1];(0,i.useEffect)((function(){var e;null==Z||null===(e=Z.current)||void 0===e||e.focus()}),[]);var y=(0,i.useCallback)((function(){var e=null==O?void 0:O.tags,t=[];e&&(t=e.split(",").map((function(e){return e.trim()})).filter((function(e){return!!e}))),r(P(P({},O),{},{name:(null==O?void 0:O.name)||(0,m.Y6)(),tags:t})),null==n||n()}),[O,n,r]);return(0,i.useEffect)((function(){var e,r=function(e){if(e.stopPropagation(),e.key===j.KW)null==n||n();else if(e.key===j.tt){var r=e.target.innerText;r.startsWith("Create")||"Cancel"===r||y()}};return null===(e=document)||void 0===e||e.addEventListener("keydown",r),function(){var e;null===(e=document)||void 0===e||e.removeEventListener("keydown",r)}}),[y,n]),(0,x.jsxs)(h.Nk,{width:55*v.iI,children:[(0,x.jsx)(h.I5,{lightBackground:!0,children:(0,x.jsxs)(c.ZP,{alignItems:"center",justifyContent:"space-between",children:[(0,x.jsx)(a.ZP,{bold:!0,cyan:!0,largeLg:!0,children:"".concat(g.G7[t]," pipeline")}),(0,x.jsx)(b,{fill:p.Z.accent.cyan,size:10*v.iI})]})}),(0,x.jsxs)(h.gI,{lightBackground:!0,children:[(0,x.jsx)(a.ZP,{default:!0,children:"Name"}),(0,x.jsx)(f.Z,{alignRight:!0,fullWidth:!0,noBackground:!0,noBorder:!0,onChange:function(e){C((function(n){return P(P({},n),{},{name:e.target.value})}))},paddingVertical:v.iI,placeholder:"Pipeline name...",ref:Z,value:(null==O?void 0:O.name)||""})]}),(0,x.jsxs)(h.gI,{lightBackground:!0,children:[(0,x.jsx)(a.ZP,{default:!0,children:"Description"}),(0,x.jsx)(u.Z,{ml:9}),(0,x.jsx)(u.Z,{fullWidth:!0,px:2,py:1,children:(0,x.jsx)(d.Z,{onChange:function(e){C((function(n){return P(P({},n),{},{description:e.target.value})}))},rows:2,value:(null==O?void 0:O.description)||""})})]}),(0,x.jsxs)(h.gI,{lightBackground:!0,children:[(0,x.jsx)(a.ZP,{default:!0,children:"Tags"}),(0,x.jsx)(f.Z,{alignRight:!0,fullWidth:!0,noBackground:!0,noBorder:!0,onChange:function(e){var n=e.target.value;C((function(e){return P(P({},e),{},{tags:n})}))},paddingVertical:v.iI,placeholder:"e.g. tag_1, tag_2",value:(null==O?void 0:O.tags)||""})]}),(0,x.jsx)(h.$b,{topBorder:!0,children:(0,x.jsxs)(c.ZP,{fullWidth:!0,children:[(0,x.jsx)(o.Z,{flex:"1",children:(0,x.jsx)(l.ZP,{fullWidth:!0,onClick:n,children:"Cancel"})}),(0,x.jsx)(u.Z,{ml:1}),(0,x.jsx)(o.Z,{flex:"1",children:(0,x.jsx)(s.ZP,{bold:!0,centerText:!0,disabled:!(null!=O&&O.name),fullWidth:!0,onClick:y,primary:!0,uuid:"ConfigurePipeline/CreatePipeline",children:"Create"})})]})})]})}},70026:function(e,n,r){var t=r(75582),i=r(34376),l=r.n(i),o=r(82684),c=r(71180),s=r(59658),u=r(55485),a=r(65956),d=r(89515),f=r(35185),p=r(38276),h=r(75499),j=r(30160),g=r(69650),v=r(65327),m=r(42122),x=r(86735),b=r(70515),P=r(89538),Z=r(28598);n.Z=function(e){var n=e.fetchPipelines,r=e.onCancel,i=(0,o.useState)(!1),w=i[0],O=i[1],C=(0,o.useState)(!1),y=C[0],I=C[1],k=(0,o.useState)({}),A=k[0],M=k[1],W=(0,o.useState)({}),E=W[0],B=W[1],S=!(0,m.Qr)(A),T=(0,P.dd)((function(){var e=Object.values(E)[0],n=null==e?void 0:e.message,t=!!n;return(0,Z.jsx)(d.Z,{cancelText:t?null:"Edit ".concat(null==e?void 0:e.name),centerOnScreen:!0,confirmText:"Close",danger:t,neutral:!t,onCancel:t?void 0:function(){return l().push("/pipelines/[pipeline]/edit","/pipelines/".concat(null==e?void 0:e.name,"/edit"))},onClick:function(){return r()},subtitle:t?n:"Pipeline ".concat(null==e?void 0:e.name," successfully imported!"),title:t?"Error on pipeline import.":"Successful import!",width:50*b.iI})}),{},[E],{background:!0,uuid:"confirm_upload"}),N=(0,t.Z)(T,1)[0],D=(0,o.useMemo)((function(){var e=[];return(0,x.YC)(Object.entries(A),(function(e){var n=(0,t.Z)(e,2),r=n[0];n[1];return r})).forEach((function(n){var r=(0,t.Z)(n,2),i=r[0],l=r[1],o=E[i],c=null==o?void 0:o.message;e.push([(0,Z.jsxs)("div",{children:[(0,Z.jsx)(j.ZP,{overflowWrap:!0,preWrap:!0,children:i}),c&&(0,Z.jsx)(p.Z,{mt:1,children:(0,Z.jsx)(j.ZP,{danger:!0,small:!0,children:c})})]},"name-".concat(i)),(0,Z.jsx)(f.Z,{danger:!!c,progress:100*l},"progress-".concat(i))])})),(0,Z.jsx)(h.Z,{columnFlex:[1,4],columns:[{uuid:"Filename"},{uuid:"Upload progress"}],rows:e,uuid:"block-runs"})}),[A,E]);return(0,Z.jsxs)(a.Z,{footer:(0,Z.jsxs)(u.ZP,{fullWidth:!0,justifyContent:"space-between",children:[(0,Z.jsx)(c.ZP,{onClick:function(){return r()},children:"Close"}),(0,Z.jsx)(p.Z,{ml:1,children:(0,Z.jsxs)(u.ZP,{alignItems:"center",justifyContent:"flex-end",children:[(0,Z.jsx)(j.ZP,{children:"Overwrite pipeline files"}),(0,Z.jsx)(p.Z,{ml:1}),(0,Z.jsx)(g.Z,{checked:w,onCheck:O})]})})]}),headerTitle:"Import pipeline from .zip file",children:[S&&(0,Z.jsx)(v.kA,{children:D}),!S&&(0,Z.jsxs)(s.Z,{directoryPath:null,onDragActiveChange:I,overwrite:w,pipelineZip:!0,setFileUploadProgress:M,setUploadedFiles:function(e){B(e),N(),null==n||n()},children:[(0,Z.jsx)(v.es,{children:(0,Z.jsxs)(j.ZP,{center:!0,children:[y&&"Drop pipeline zip to import",!y&&"Click or drop pipeline zip to upload"]})}),(0,Z.jsx)(p.Z,{mt:2,children:(0,Z.jsxs)(j.ZP,{warning:!0,children:["The zip file should include the pipeline’s metadata.yaml file and each",(0,Z.jsx)("br",{}),"block’s script file in the root folder."]})})]})]})}}}]);