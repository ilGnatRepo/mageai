"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6427],{52749:function(e,n,t){var r=t(82394),i=t(82684),l=t(71180),o=t(55485),c=t(68562),d=t(7267),a=t(38276),u=t(30160),s=t(35576),p=t(17488),f=t(72473),h=t(4015),v=t(70515),j=t(81728),g=t(28598);function m(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function x(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?m(Object(t),!0).forEach((function(n){(0,r.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):m(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}n.Z=function(e){var n,t,r,m,b=e.createPipeline,Z=e.isLoading,P=e.onClose,O=(0,i.useRef)(null),w=(0,i.useState)(!1),y=w[0],C=w[1],k=(0,i.useState)({name:(0,j.Y6)()}),I=k[0],_=k[1];return(0,i.useEffect)((function(){var e;null==O||null===(e=O.current)||void 0===e||e.focus()}),[]),(0,g.jsxs)(h.Nk,{children:[(0,g.jsx)(h.I5,{children:(0,g.jsx)(o.ZP,{alignItems:"center",justifyContent:"center",children:(0,g.jsx)(f.AISparkle,{size:5*v.iI,warning:!0})})}),(0,g.jsx)(h.gI,{children:(0,g.jsxs)(a.Z,{py:1,children:[(0,g.jsx)(a.Z,{mb:1,children:(0,g.jsx)(u.ZP,{default:!0,children:"新建管道"})}),(0,g.jsx)(u.ZP,{textOverflow:!0,children:"使用 AI"})]})}),(0,g.jsxs)(h.gI,{children:[(0,g.jsx)(u.ZP,{default:!0,children:"名称"}),(0,g.jsx)(p.Z,{alignRight:!0,noBackground:!0,noBorder:!0,onChange:function(e){return _((function(n){return x(x({},n),{},{name:e.target.value})}))},paddingVertical:v.iI,placeholder:"输入管道名称...",value:(null==I?void 0:I.name)||""})]}),(0,g.jsx)(h.gI,{children:(0,g.jsxs)(o.ZP,{flexDirection:"column",fullWidth:!0,children:[(0,g.jsx)(a.Z,{mb:2,pt:1,children:(0,g.jsx)(u.ZP,{default:!0,children:"描述管道应执行的操作"})}),(0,g.jsxs)(a.Z,{pb:1,pr:v.cd,children:[(0,g.jsx)(s.Z,{fullWidth:!0,onChange:function(e){return _((function(n){return x(x({},n),{},{llm:{request:{pipeline_description:e.target.value},use_case:d.z.GENERATE_PIPELINE_WITH_DESCRIPTION}})}))},placeholder:"输入管道用途...",ref:O,rows:8,value:(null==I||null===(n=I.llm)||void 0===n||null===(t=n.request)||void 0===t?void 0:t.pipeline_description)||""}),(Z||y)&&(0,g.jsx)(a.Z,{mt:1,children:(0,g.jsx)(u.ZP,{warning:!0,children:"正在根据您的描述使用 AI 生成管道..."})})]})]})}),(0,g.jsx)(h.$b,{children:(0,g.jsxs)(o.ZP,{fullWidth:!0,children:[(0,g.jsx)(c.ZP,{bold:!0,centerText:!0,disabled:!(null!=I&&I.name&&null!=I&&null!==(r=I.llm)&&void 0!==r&&null!==(m=r.request)&&void 0!==m&&m.pipeline_description),loading:Z||y,onClick:function(){C(!0),b({pipeline:I}).then((function(){return C(!1)}))},primary:!0,tabIndex:0,uuid:"AIControlPanel/CreatePipeline",children:"创建管道"}),P&&(0,g.jsx)(a.Z,{ml:1,children:(0,g.jsx)(l.ZP,{onClick:P,tabIndex:0,children:"取消"})})]})})]})}},94629:function(e,n,t){t.d(n,{Z:function(){return O}});var r=t(82394),i=t(21831),l=t(82684),o=t(50724),c=t(82555),d=t(97618),a=t(70613),u=t(92272),s=t(68899),p=t(28598);function f(e,n){var t=e.children,r=e.noPadding;return(0,p.jsx)(s.HS,{noPadding:r,ref:n,children:t})}var h=l.forwardRef(f),v=t(62547),j=t(82571),g=t(77417),m=t(46684),x=t(75375);function b(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function Z(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?b(Object(t),!0).forEach((function(n){(0,r.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):b(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function P(e,n){e.addProjectBreadcrumbToCustomBreadcrumbs;var t=e.after,r=e.afterHeader,l=e.afterHidden,f=e.afterWidth,b=e.afterWidthOverride,P=e.appendBreadcrumbs,O=e.before,w=e.beforeHeader,y=e.beforeWidth,C=e.breadcrumbs,k=e.children,I=e.contained,_=e.errors,A=e.headerMenuItems,B=e.headerOffset,E=e.hideAfterCompletely,S=e.mainContainerHeader,M=e.navigationItems,N=e.setAfterHidden,T=e.setAfterWidth,D=e.setBeforeWidth,W=e.setErrors,H=e.subheaderChildren,L=e.subheaderNoPadding,R=e.title,z=e.uuid,U=(0,x.Z)(z,{beforeResizeOffset:x.H,setWidthAfter:T,setWidthBefore:D,widthAfter:f,widthBefore:y,widthOverrideAfter:b}),V=U.mainContainerRef,F=U.mousedownActiveAfter,G=U.mousedownActiveBefore,Y=U.setMousedownActiveAfter,q=U.setMousedownActiveBefore,K=U.setWidthAfter,$=U.setWidthBefore,Q=U.widthAfter,J=U.widthBefore,X=(0,g.Z)().project,ee=[];return C&&ee.push.apply(ee,(0,i.Z)(C)),null!=C&&C.length&&!P||!X||null!=C&&C.length||ee.unshift({bold:!P,label:function(){return R}}),(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(a.Z,{title:R}),(0,p.jsx)(u.Z,{breadcrumbs:ee,menuItems:A}),(0,p.jsxs)(s.Nk,{ref:n,children:[0!==(null==M?void 0:M.length)&&(0,p.jsx)(s.lm,{showMore:!0,children:(0,p.jsx)(j.Z,{navigationItems:M,showMore:!0})}),(0,p.jsx)(d.Z,{flex:1,flexDirection:"column",children:(0,p.jsxs)(v.Z,{after:t,afterHeader:r,afterHeightOffset:m.Mz,afterHidden:l,afterMousedownActive:F,afterWidth:Q,before:O,beforeHeader:w,beforeHeightOffset:m.Mz,beforeMousedownActive:G,beforeWidth:O?J:s.k1,contained:I,headerOffset:B,hideAfterCompletely:!t||E,leftOffset:O?s.k1:null,mainContainerHeader:S,mainContainerRef:V,setAfterHidden:N,setAfterMousedownActive:Y,setAfterWidth:K,setBeforeMousedownActive:q,setBeforeWidth:$,children:[H&&(0,p.jsx)(h,{noPadding:L,children:H}),k]})})]}),_&&(0,p.jsx)(o.Z,{disableClickOutside:!0,isOpen:!0,onClickOutside:function(){return null==W?void 0:W(null)},children:(0,p.jsx)(c.Z,Z(Z({},_),{},{onClose:function(){return null==W?void 0:W(null)}}))})]})}var O=l.forwardRef(P)},65458:function(e,n,t){t.d(n,{d:function(){return a}});var r=t(72473),i=t(57653),l=t(70515),o=t(81728),c=t(28598),d=1.5*l.iI,a=function(e,n){var t=[{beforeIcon:(0,c.jsx)(r.BatchPipeline,{}),label:function(){return"标准 (批处理)"},onClick:function(){var t;null!=n&&n.showCreatePipelineModal?null==n||null===(t=n.showCreatePipelineModal)||void 0===t||t.call(n,{pipelineType:i.qL.PYTHON}):e({pipeline:{name:(0,o.Y6)()}})},uuid:"Pipelines/NewPipelineMenu/standard"},{beforeIcon:(0,c.jsx)(r.IntegrationPipeline,{}),label:function(){return"数据集成"},onClick:function(){var t;null!=n&&n.showCreatePipelineModal?null==n||null===(t=n.showCreatePipelineModal)||void 0===t||t.call(n,{pipelineType:i.qL.INTEGRATION}):e({pipeline:{name:(0,o.Y6)(),type:i.qL.INTEGRATION}})},uuid:"Pipelines/NewPipelineMenu/integration"},{beforeIcon:(0,c.jsx)(r.StreamingPipeline,{size:d}),label:function(){return"流处理"},onClick:function(){var t;null!=n&&n.showCreatePipelineModal?null==n||null===(t=n.showCreatePipelineModal)||void 0===t||t.call(n,{pipelineType:i.qL.STREAMING}):e({pipeline:{name:(0,o.Y6)(),type:i.qL.STREAMING}})},uuid:"Pipelines/NewPipelineMenu/streaming"}];return null!=n&&n.showBrowseTemplates&&t.push({beforeIcon:(0,c.jsx)(r.TemplateShapes,{}),label:function(){return"从模板"},onClick:function(){var e;return null==n||null===(e=n.showBrowseTemplates)||void 0===e?void 0:e.call(n)},uuid:"Pipelines/NewPipelineMenu/custom_template"}),null!=n&&n.showImportPipelineModal&&t.push({beforeIcon:(0,c.jsx)(r.Upload,{}),label:function(){return"导入管道 zip"},onClick:function(){var e;return null==n||null===(e=n.showImportPipelineModal)||void 0===e?void 0:e.call(n)},uuid:"Pipelines/NewPipelineMenu/upload"}),null!=n&&n.showAIModal&&t.push({beforeIcon:(0,c.jsx)(r.AISparkle,{}),label:function(){return"使用 AI (测试版)"},onClick:function(){var e;return null==n||null===(e=n.showAIModal)||void 0===e?void 0:e.call(n)},uuid:"Pipelines/NewPipelineMenu/AI_modal"}),t}},4015:function(e,n,t){t.d(n,{$b:function(){return u},I5:function(){return d},Nk:function(){return c},gI:function(){return a}});var r=t(9518),i=t(44897),l=t(42631),o=t(70515),c=r.default.div.withConfig({displayName:"indexstyle__ContainerStyle",componentId:"sc-h093u4-0"})([""," ",""],(function(e){return!e.width&&"\n    width: ".concat(40*o.iI,"px;\n  ")}),(function(e){return e.width&&"\n    width: ".concat(e.width,"px;\n  ")})),d=r.default.div.withConfig({displayName:"indexstyle__HeaderStyle",componentId:"sc-h093u4-1"})(["padding:","px;"," ",""],2.5*o.iI,(function(e){return"\n    background-color: ".concat((e.theme.background||i.Z.background).dashboard,";\n    border-left: 1px solid ").concat((e.theme.interactive||i.Z.interactive).defaultBorder,";\n    border-right: 1px solid ").concat((e.theme.interactive||i.Z.interactive).defaultBorder,";\n    border-top-left-radius: ").concat(l.n_,"px;\n    border-top-right-radius: ").concat(l.n_,"px;\n    border-top: 1px solid ").concat((e.theme.interactive||i.Z.interactive).defaultBorder,";\n  ")}),(function(e){return e.lightBackground&&"\n    background-color: ".concat((e.theme.background||i.Z.background).panel,"\n  ")})),a=r.default.div.withConfig({displayName:"indexstyle__RowStyle",componentId:"sc-h093u4-2"})(["align-items:center;justify-content:space-between;"," "," ",""],(function(e){return"\n    background-color: ".concat((e.theme.background||i.Z.background).dashboard,";\n    border-left: 1px solid ").concat((e.theme.interactive||i.Z.interactive).defaultBorder,";\n    border-right: 1px solid ").concat((e.theme.interactive||i.Z.interactive).defaultBorder,";\n    border-top: 1px solid ").concat((e.theme.interactive||i.Z.interactive).defaultBorder,";\n    display: ").concat((null==e?void 0:e.display)||"flex",";\n    padding-bottom: ").concat(1*o.iI+((null==e?void 0:e.paddingVerticalAddition)||0),"px;\n    padding-left: ").concat(o.cd*o.iI,"px;\n    padding-top: ").concat(1*o.iI+((null==e?void 0:e.paddingVerticalAddition)||0),"px;\n  ")}),(function(e){return e.columnFlex&&"\n    display: flex;\n    flex-direction: column;\n  "}),(function(e){return e.lightBackground&&"\n    background-color: ".concat((e.theme.background||i.Z.background).panel,"\n  ")})),u=r.default.div.withConfig({displayName:"indexstyle__FooterStyle",componentId:"sc-h093u4-3"})(["padding:","px ","px;"," ",""],2.5*o.iI,2*o.iI,(function(e){return"\n    background-color: ".concat((e.theme.background||i.Z.background).panel,";\n    border-bottom-left-radius: ").concat(l.n_,"px;\n    border-bottom-right-radius: ").concat(l.n_,"px;\n    border-bottom: 1px solid ").concat((e.theme.interactive||i.Z.interactive).defaultBorder,";\n    border-left: 1px solid ").concat((e.theme.interactive||i.Z.interactive).defaultBorder,";\n    border-right: 1px solid ").concat((e.theme.interactive||i.Z.interactive).defaultBorder,";\n  ")}),(function(e){return e.topBorder&&"\n    border-top: 1px solid ".concat((e.theme.interactive||i.Z.interactive).defaultBorder,";\n  ")}))},76111:function(e,n,t){var r=t(82394),i=t(82684),l=t(71180),o=t(97618),c=t(55485),d=t(68562),a=t(38276),u=t(30160),s=t(35576),p=t(17488),f=t(44897),h=t(4015),v=t(39643),j=t(57653),g=t(70515),m=t(81728),x=t(28598);function b(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function Z(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?b(Object(t),!0).forEach((function(n){(0,r.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):b(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}n.Z=function(e){var n=e.onClose,t=e.onSave,r=e.pipelineType,b=j.Mj[r],P=(0,i.useRef)(null),O=(0,i.useState)({name:(0,m.Y6)()}),w=O[0],y=O[1];(0,i.useEffect)((function(){var e;null==P||null===(e=P.current)||void 0===e||e.focus()}),[]);var C=(0,i.useCallback)((function(){var e=null==w?void 0:w.tags,r=[];e&&(r=e.split(",").map((function(e){return e.trim()})).filter((function(e){return!!e}))),t(Z(Z({},w),{},{name:(null==w?void 0:w.name)||(0,m.Y6)(),tags:r})),null==n||n()}),[w,n,t]);return(0,i.useEffect)((function(){var e,t=function(e){if(e.stopPropagation(),e.key===v.KW)null==n||n();else if(e.key===v.tt){var t=e.target.innerText;t.startsWith("Create")||"Cancel"===t||C()}};return null===(e=document)||void 0===e||e.addEventListener("keydown",t),function(){var e;null===(e=document)||void 0===e||e.removeEventListener("keydown",t)}}),[C,n]),(0,x.jsxs)(h.Nk,{width:55*g.iI,children:[(0,x.jsx)(h.I5,{lightBackground:!0,children:(0,x.jsxs)(c.ZP,{alignItems:"center",justifyContent:"space-between",children:[(0,x.jsx)(u.ZP,{bold:!0,cyan:!0,largeLg:!0,children:"".concat(j.G7[r]," pipeline")}),(0,x.jsx)(b,{fill:f.Z.accent.cyan,size:10*g.iI})]})}),(0,x.jsxs)(h.gI,{lightBackground:!0,children:[(0,x.jsx)(u.ZP,{default:!0,children:"Name"}),(0,x.jsx)(p.Z,{alignRight:!0,fullWidth:!0,noBackground:!0,noBorder:!0,onChange:function(e){y((function(n){return Z(Z({},n),{},{name:e.target.value})}))},paddingVertical:g.iI,placeholder:"Pipeline name...",ref:P,value:(null==w?void 0:w.name)||""})]}),(0,x.jsxs)(h.gI,{lightBackground:!0,children:[(0,x.jsx)(u.ZP,{default:!0,children:"Description"}),(0,x.jsx)(a.Z,{ml:9}),(0,x.jsx)(a.Z,{fullWidth:!0,px:2,py:1,children:(0,x.jsx)(s.Z,{onChange:function(e){y((function(n){return Z(Z({},n),{},{description:e.target.value})}))},rows:2,value:(null==w?void 0:w.description)||""})})]}),(0,x.jsxs)(h.gI,{lightBackground:!0,children:[(0,x.jsx)(u.ZP,{default:!0,children:"Tags"}),(0,x.jsx)(p.Z,{alignRight:!0,fullWidth:!0,noBackground:!0,noBorder:!0,onChange:function(e){var n=e.target.value;y((function(e){return Z(Z({},e),{},{tags:n})}))},paddingVertical:g.iI,placeholder:"e.g. tag_1, tag_2",value:(null==w?void 0:w.tags)||""})]}),(0,x.jsx)(h.$b,{topBorder:!0,children:(0,x.jsxs)(c.ZP,{fullWidth:!0,children:[(0,x.jsx)(o.Z,{flex:"1",children:(0,x.jsx)(l.ZP,{fullWidth:!0,onClick:n,children:"Cancel"})}),(0,x.jsx)(a.Z,{ml:1}),(0,x.jsx)(o.Z,{flex:"1",children:(0,x.jsx)(d.ZP,{bold:!0,centerText:!0,disabled:!(null!=w&&w.name),fullWidth:!0,onClick:C,primary:!0,uuid:"ConfigurePipeline/CreatePipeline",children:"Create"})})]})})]})}},70026:function(e,n,t){var r=t(75582),i=t(34376),l=t.n(i),o=t(82684),c=t(71180),d=t(59658),a=t(55485),u=t(65956),s=t(89515),p=t(35185),f=t(38276),h=t(75499),v=t(30160),j=t(69650),g=t(65327),m=t(42122),x=t(86735),b=t(70515),Z=t(89538),P=t(28598);n.Z=function(e){var n=e.fetchPipelines,t=e.onCancel,i=(0,o.useState)(!1),O=i[0],w=i[1],y=(0,o.useState)(!1),C=y[0],k=y[1],I=(0,o.useState)({}),_=I[0],A=I[1],B=(0,o.useState)({}),E=B[0],S=B[1],M=!(0,m.Qr)(_),N=(0,Z.dd)((function(){var e=Object.values(E)[0],n=null==e?void 0:e.message,r=!!n;return(0,P.jsx)(s.Z,{cancelText:r?null:"Edit ".concat(null==e?void 0:e.name),centerOnScreen:!0,confirmText:"Close",danger:r,neutral:!r,onCancel:r?void 0:function(){return l().push("/pipelines/[pipeline]/edit","/pipelines/".concat(null==e?void 0:e.name,"/edit"))},onClick:function(){return t()},subtitle:r?n:"Pipeline ".concat(null==e?void 0:e.name," successfully imported!"),title:r?"Error on pipeline import.":"Successful import!",width:50*b.iI})}),{},[E],{background:!0,uuid:"confirm_upload"}),T=(0,r.Z)(N,1)[0],D=(0,o.useMemo)((function(){var e=[];return(0,x.YC)(Object.entries(_),(function(e){var n=(0,r.Z)(e,2),t=n[0];n[1];return t})).forEach((function(n){var t=(0,r.Z)(n,2),i=t[0],l=t[1],o=E[i],c=null==o?void 0:o.message;e.push([(0,P.jsxs)("div",{children:[(0,P.jsx)(v.ZP,{overflowWrap:!0,preWrap:!0,children:i}),c&&(0,P.jsx)(f.Z,{mt:1,children:(0,P.jsx)(v.ZP,{danger:!0,small:!0,children:c})})]},"name-".concat(i)),(0,P.jsx)(p.Z,{danger:!!c,progress:100*l},"progress-".concat(i))])})),(0,P.jsx)(h.Z,{columnFlex:[1,4],columns:[{uuid:"Filename"},{uuid:"Upload progress"}],rows:e,uuid:"block-runs"})}),[_,E]);return(0,P.jsxs)(u.Z,{footer:(0,P.jsxs)(a.ZP,{fullWidth:!0,justifyContent:"space-between",children:[(0,P.jsx)(c.ZP,{onClick:function(){return t()},children:"Close"}),(0,P.jsx)(f.Z,{ml:1,children:(0,P.jsxs)(a.ZP,{alignItems:"center",justifyContent:"flex-end",children:[(0,P.jsx)(v.ZP,{children:"Overwrite pipeline files"}),(0,P.jsx)(f.Z,{ml:1}),(0,P.jsx)(j.Z,{checked:O,onCheck:w})]})})]}),headerTitle:"Import pipeline from .zip file",children:[M&&(0,P.jsx)(g.kA,{children:D}),!M&&(0,P.jsxs)(d.Z,{directoryPath:null,onDragActiveChange:k,overwrite:O,pipelineZip:!0,setFileUploadProgress:A,setUploadedFiles:function(e){S(e),T(),null==n||n()},children:[(0,P.jsx)(g.es,{children:(0,P.jsxs)(v.ZP,{center:!0,children:[C&&"Drop pipeline zip to import",!C&&"Click or drop pipeline zip to upload"]})}),(0,P.jsx)(f.Z,{mt:2,children:(0,P.jsxs)(v.ZP,{warning:!0,children:["The zip file should include the pipeline’s metadata.yaml file and each",(0,P.jsx)("br",{}),"block’s script file in the root folder."]})})]})]})}},55729:function(e,n,t){t.d(n,{Z:function(){return M}});var r=t(82394),i=t(75582),l=t(82684),o=t(83455),c=t(71180),d=t(15338),a=t(97618),u=t(55485),s=t(85854),p=t(65956),f=t(82359),h=t(88543),v=t(38276),j=t(30160),g=t(69650),m=t(12468),x=t(35686),b=t(77417),Z=t(9518),P=t(44897),O=t(42631),w=t(70515),y=Z.default.div.withConfig({displayName:"indexstyle__ContainerStyle",componentId:"sc-1b0w59t-0"})(["border-radius:","px;padding:","px;",""],O.n_,w.cd*w.iI,(function(e){return"\n    background-color: ".concat((e.theme.background||P.Z.background).codeArea,";\n  ")})),C=t(70320),k=t(81728),I=t(42122),_=t(72619),A=t(23780),B=t(28598);function E(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function S(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?E(Object(t),!0).forEach((function(n){(0,r.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):E(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var M=function(e){var n,t,Z,P=e.cancelButtonText,O=e.contained,E=e.header,M=e.onCancel,N=e.onSaveSuccess,T=e.rootProject,D=(0,A.VI)(null,{},[],{uuid:"settings/workspace/preferences"}),W=(0,i.Z)(D,1)[0],H=(0,l.useState)(null),L=H[0],R=H[1],z=(0,l.useState)(!1),U=(z[0],z[1]),V=(0,b.Z)(),F=V.fetchProjects,G=V.project,Y=V.projectPlatformActivated,q=V.rootProject,K=(0,l.useMemo)((function(){return T?q:G}),[G,q,T]),$=K||{},Q=$.name,J=($.openai_api_key,$.project_uuid);(0,l.useMemo)((function(){return"demo.mage.ai"===window.location.hostname}),[]),(0,l.useEffect)((function(){L||R(K)}),[K,L]);var X=(0,o.Db)(x.ZP.projects.useUpdate(Q),{onSuccess:function(e){return(0,_.wD)(e,{callback:function(e){var n,t=e.project;F(),R(t),U(!1),(0,C.hY)(null==t||null===(n=t.features)||void 0===n?void 0:n[f.d.LOCAL_TIMEZONE]),N&&(null==N||N(t))},onErrorCallback:function(e,n){return W({errors:n,response:e})}})}}),ee=(0,i.Z)(X,2),ne=ee[0],te=ee[1].isLoading,re=(0,l.useCallback)((function(e){return ne({project:S(S({},e),{},{root_project:T})})}),[T,ne]),ie=(0,B.jsxs)(B.Fragment,{children:[E,(0,B.jsxs)(p.Z,{noPadding:!0,children:[(0,B.jsxs)(v.Z,{p:w.cd,children:[(0,B.jsx)(v.Z,{mb:1,children:(0,B.jsx)(s.Z,{level:5,children:"项目名称"})}),(0,B.jsx)(j.ZP,{default:!0,monospace:!0,children:Q})]}),(0,B.jsx)(d.Z,{light:!0}),(0,B.jsxs)(v.Z,{p:w.cd,children:[(0,B.jsx)(v.Z,{mb:1,children:(0,B.jsx)(s.Z,{level:5,children:"项目 UUID"})}),(0,B.jsx)(j.ZP,{default:!!J,monospace:!0,muted:!J,children:J||"不需要"})]}),(0,B.jsx)(d.Z,{light:!0})]}),(0,B.jsx)(v.Z,{mt:w.HN}),(0,B.jsx)(h.Z,{description:"应用于此项目中所有管道的全局设置。",title:"管道设置",children:(0,B.jsx)(h.S,{description:"每次在此管道中创建或更新触发器时，自动将其持久化到代码中。",title:"自动在代码中保存触发器",toggleSwitch:{checked:!(null==L||null===(n=L.pipelines)||void 0===n||null===(t=n.settings)||void 0===t||null===(Z=t.triggers)||void 0===Z||!Z.save_in_code_automatically),onCheck:function(e){return R((function(n){var t,r,i,l,o,c;return S(S({},n),{},{pipelines:S(S({},null==n?void 0:n.pipelines),{},{settings:S(S({},null==n||null===(t=n.pipelines)||void 0===t?void 0:t.settings),{},{triggers:S(S({},null==n||null===(r=n.pipelines)||void 0===r||null===(i=r.settings)||void 0===i?void 0:i.triggers),{},{save_in_code_automatically:e(null==n||null===(l=n.pipelines)||void 0===l||null===(o=l.settings)||void 0===o||null===(c=o.triggers)||void 0===c?void 0:c.save_in_code_automatically)})})})})}))}}})}),(0,B.jsx)(v.Z,{mt:w.HN}),(0,B.jsx)(p.Z,{noPadding:!0,overflowVisible:!0,children:(0,B.jsxs)(v.Z,{p:w.cd,children:[(0,B.jsx)(v.Z,{mb:1,children:(0,B.jsx)(s.Z,{level:5,children:"功能特性"})}),Object.entries((0,I.gR)(null==L?void 0:L.features,[f.d.CODE_BLOCK_V2,f.d.COMMAND_CENTER,f.d.COMPUTE_MANAGEMENT,f.d.CUSTOM_DESIGN,f.d.DBT_V2,f.d.GLOBAL_HOOKS,f.d.NOTEBOOK_BLOCK_OUTPUT_SPLIT_VIEW])||{}).map((function(e,n){var t=(0,i.Z)(e,2),l=t[0],o=t[1],c=Y&&!T&&(null==K?void 0:K.features_override)&&l in(null==K?void 0:K.features_override);return(0,B.jsx)(v.Z,{mt:0===n?0:1,children:(0,B.jsxs)(u.ZP,{alignItems:"center",children:[(0,B.jsxs)(a.Z,{flex:1,children:[(0,B.jsx)(g.Z,{disabled:c,checked:!!o,compact:!0,onCheck:function(){return R((function(e){return S(S({},e),{},{features:S(S({},null==L?void 0:L.features),{},(0,r.Z)({},l,!o))})}))}}),(0,B.jsx)(v.Z,{mr:w.cd}),(0,B.jsxs)(a.Z,{children:[(0,B.jsx)(j.ZP,{default:!o,monospace:!0,children:(0,k.vg)(l)}),l===f.d.LOCAL_TIMEZONE&&(0,B.jsx)(v.Z,{ml:1,children:(0,B.jsx)(m.Z,S({},C.EB))})]})]}),c&&(0,B.jsx)(j.ZP,{monospace:!0,muted:!0,small:!0,children:"已覆盖"})]})},l)}))]})}),(0,B.jsx)(v.Z,{mt:w.HN}),(0,B.jsxs)(u.ZP,{alignItems:"center",children:[(0,B.jsx)(c.ZP,{id:"save-project-settings",loading:te,onClick:function(){var e={features:null==L?void 0:L.features,help_improve_mage:null==L?void 0:L.help_improve_mage,openai_api_key:null==L?void 0:L.openai_api_key,pipelines:null==L?void 0:L.pipelines};!0===(null==K?void 0:K.help_improve_mage)&&!1===(null==L?void 0:L.help_improve_mage)&&(e.deny_improve_mage=!0),re(e)},primary:!0,children:"保存项目设置"}),M&&(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)(v.Z,{mr:w.cd}),(0,B.jsx)(c.ZP,{onClick:M,secondary:!0,children:P||"取消"})]})]})]});return O?(0,B.jsx)(y,{children:ie}):ie}}}]);